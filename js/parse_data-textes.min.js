var rows,allResults,title,content,table_body,table_body_start=document.getElementsByTagName("tbody")[0].innerHTML,urls=['https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-ce.tsv','https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-gren.tsv','https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-maphil.tsv','https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-mater.tsv','https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-collected.tsv','https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-haut.tsv','https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-bac.tsv'];Promise.all(urls.map(a=>new Promise((e,t)=>Papa.parse(a,{download:!0,header:!1,delimiter:"    ",complete:e,error:t})))).then(function(e){rows=e[0].data.concat(e[1].data).concat(e[2].data).concat(e[3].data).concat(e[4].data),table_body="<tbody>",rows.forEach(e=>{recherche=document.getElementById("recherche_dans_le_sujet").value,table_body+="<tr>",cellules=e[0].split("\t"),cellules.forEach(e=>{table_body=table_body+"<td>"+e+"</td>"}),table_body+="</tr>"}),table_body+="</tbody>"}).catch(e=>console.warn("Something went wrong:",e));var input=document.getElementById("recherche_dans_le_sujet");input.oninput=handleInput;let checker=(t,e)=>e.every(e=>t.includes(e));function handleInput(e){var t=input.value.toLowerCase();this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout(function(){var e;t?(search_items=t.split("+"),table_body="<tbody>",rows.forEach(e=>{cellules=e[0].split("\t"),texte="« "+cellules[2]+" »",checker(cellules.toString().toLowerCase(),search_items)&&(table_body+="<tr>",auteur="<br/><b>"+cellules[0]+"</b>",reference=cellules[1]?", "+cellules[1]:"",precisions=cellules[3]?"<br/>"+cellules[3]:"",table_body=table_body+"<td>"+texte+auteur+reference+precisions+"</td>",table_body+="</tr>")}),table_body+="</tbody>",document.getElementsByTagName("tbody")[0].innerHTML=table_body,e=document.getElementById("content"),new Mark(e).mark(search_items,options={accuracy:"complementary",separateWordSearch:!1})):document.getElementsByTagName("tbody")[0].innerHTML=table_body_start},300)}