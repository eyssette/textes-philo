function handleInput(t){document.getElementsByTagName("tbody")[0].innerHTML='<td></td><td><span class="loader"></span></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>';let e=input.value.toLowerCase();this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout(function(){if(e.length>2&&ready>0){let t=e.split("+");tableBody="<tbody>",rows.forEach(e=>{let o=e[0].split("\t"),s=o.toString().toLowerCase();if(checker(s,t)){let e=0;t.forEach(t=>{let s=new RegExp("\\b"+t+"\\b|\\b"+t+"s\\b","gi"),a=o[2].toLowerCase().split(t).length-1,l=2*(o[2].toLowerCase().match(s)||[]).length;e+=2*(a+l);let n=o[0].toLowerCase().split(t).length-1,d=2*(o[0].toLowerCase().match(s)||[]).length;if(e+=4*(n+d),o[3]){let s=o[3].toLowerCase().split(t).length-1;e+=s}if(o[1]){let s=o[1].toLowerCase().split(t).length-1;e+=s}});let s="« "+o[2]+" »";tableBody+="<tr>";let a="<br/><b>"+o[0]+"</b>",l="",n="";l=o[1]?", "+o[1]:"",n=o[3]?"<br/>"+o[3]:"",o[4]?c1='<td><span class="tooltip">'+o[4]+'<span class="tooltiptext">Éthique et philosophie morale</span></span></td>':c1="<td></td>",o[5]?c2='<td><span class="tooltip">'+o[5]+'<span class="tooltiptext">Philosophie de l\'esprit</span></span></td>':c2="<td></td>",o[6]?c3='<td><span class="tooltip">'+o[6]+'<span class="tooltiptext">Philosophie de la culture</span></span></td>':c3="<td></td>",o[7]?c4='<td><span class="tooltip">'+o[7]+'<span class="tooltiptext">Philosophie sociale et politique</span></span></td>':c4="<td></td>",o[8]?c5='<td><span class="tooltip">'+o[8]+'<span class="tooltiptext">Épistémologie et métaphysique</span></span></td>':c5="<td></td>",o[9]?c6='<td><span class="tooltip">'+o[9]+'<span class="tooltiptext">Philosophie du langage</span></span></td>':c6="<td></td>",tableBody=tableBody+"<td>"+a+"</td><td>"+s+a+l+n+"</td><td>"+e+"</td>"+c1+c2+c3+c4+c5+c6,tableBody+="</tr>"}}),tableBody+="</tbody>",document.getElementsByTagName("tbody")[0].innerHTML=tableBody;let o=document.getElementById("content"),s=1;t.forEach(t=>{let e=new Mark(o);e.mark(t,options={element:"span",className:"match"+s,accuracy:"complementary",separateWordSearch:!1}),s+=1}),fdTableSort.init("textes"),fdTableSort.jsWrapper("textes",[2,0])}else document.getElementsByTagName("tbody")[0].innerHTML=tableBodyStart},5)}let rows,tableBody;const tableBodyStart=document.getElementsByTagName("tbody")[0].innerHTML,urls=["https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-FINAL.tsv","https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-new.tsv"];let ready=0,boutonRecherche=document.getElementById("rechercher"),moteurRecherche=document.getElementById("recherche_dans_le_sujet");moteurRecherche.value="Merci de patienter : chargement de la base de données",moteurRecherche.disabled=!0,boutonRecherche.style.visibility="hidden",Promise.all(urls.map(t=>new Promise((e,o)=>Papa.parse(t,{download:!0,header:!1,delimiter:"    ",complete:e,error:o})))).then(function(t){rows=t[0].data;for(let e=1;e<urls.length;e++)rows=rows.concat(t[e].data);rows=rows.splice(1,rows.length),ready++,boutonRecherche.style.visibility="visible",moteurRecherche.disabled=!1,moteurRecherche.value=""}).catch(t=>console.warn("Something went wrong:",t));let input=document.getElementById("recherche_dans_le_sujet");boutonRecherche.onclick=handleInput,input.addEventListener("keyup",function(t){"Enter"===t.code&&boutonRecherche.click()});let checker=(t,e)=>e.every(e=>t.includes(e));