var rows,allResults,title,content,tableBody,tableBodyStart=document.getElementsByTagName("tbody")[0].innerHTML,urls=["https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-ce.tsv","https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-gren.tsv","https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-maphil.tsv","https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-mater.tsv","https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-collected.tsv","https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-haut.tsv","https://raw.githubusercontent.com/eyssette/textes-philo/main/data/textes-bac.tsv"];Promise.all(urls.map(e=>new Promise((t,s)=>Papa.parse(e,{download:!0,header:!1,delimiter:"    ",complete:t,error:s})))).then(function(e){rows=e[0].data;for(let t=1;t<urls.length;t++)rows=rows.concat(e[t].data);tableBody="<tbody>",rows.forEach(e=>{recherche=document.getElementById("recherche_dans_le_sujet").value,tableBody+="<tr>",cellules=e[0].split("\t"),cellules.forEach(e=>{tableBody=tableBody+"<td>"+e+"</td>"}),tableBody+="</tr>"}),tableBody+="</tbody>"}).catch(e=>console.warn("Something went wrong:",e));var input=document.getElementById("recherche_dans_le_sujet");input.oninput=handleInput;let checker=(e,t)=>t.every(t=>e.includes(t));function handleInput(e){var t=input.value.toLowerCase();this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout(function(){if(t.length>2){searchItems=t.split("+"),tableBody="<tbody>",rows.forEach(e=>{cellules=e[0].split("\t"),texte="« "+cellules[2]+" »",checker(cellules.toString().toLowerCase(),searchItems)&&(tableBody+="<tr>",auteur="<br/><b>"+cellules[0]+"</b>",cellules[1]?reference=", "+cellules[1]:reference="",cellules[3]?precisions="<br/>"+cellules[3]:precisions="",tableBody=tableBody+"<td>"+texte+auteur+reference+precisions+"</td>",tableBody+="</tr>")}),tableBody+="</tbody>",document.getElementsByTagName("tbody")[0].innerHTML=tableBody;var e=document.getElementById("content");new Mark(e).mark(searchItems,options={accuracy:"complementary",separateWordSearch:!1})}else document.getElementsByTagName("tbody")[0].innerHTML=tableBodyStart},300)}